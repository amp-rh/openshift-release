ref:
  as: interop-tests-fusion-access-create-cluster
  from: cli
  commands: interop-tests-fusion-access-create-cluster-commands.sh
  timeout: 15m0s
  grace_period: 15s
  best_effort: true
  resources:
    requests:
      cpu: 100m
      memory: 200Mi
  env:
  - name: STORAGE_SCALE_NAMESPACE
    documentation: The namespace for IBM Storage Scale
    default: "ibm-spectrum-scale"
  - name: STORAGE_SCALE_CLUSTER_NAME
    documentation: The name of the IBM Storage Scale cluster
    default: "ibm-spectrum-scale"
  - name: STORAGE_SCALE_CLIENT_CPU
    documentation: CPU allocation for client nodes
    default: "2"
  - name: STORAGE_SCALE_CLIENT_MEMORY
    documentation: Memory allocation for client nodes
    default: "4Gi"
  - name: STORAGE_SCALE_STORAGE_CPU
    documentation: CPU allocation for storage nodes
    default: "2"
  - name: STORAGE_SCALE_STORAGE_MEMORY
    documentation: Memory allocation for storage nodes
    default: "8Gi"
  documentation: |-
    Create IBM Storage Scale Cluster with operator-assisted device discovery.
    
    This step creates the Cluster resource WITHOUT hardcoded device paths, allowing
    the FusionAccess operator's device discovery and the Filesystem's LocalDisk
    references to determine the actual storage devices.
    
    Key improvements over hardcoded paths:
    - Works across different AWS instance types (c5n.metal, etc.)
    - Adapts to actual EBS volume device names
    - Uses operator device discovery data when available
    - Devices configured via Filesystem LocalDisk references
    
    Tests performed (JUnit XML):
    1. Cluster idempotency check
    2. Cluster resource creation
    3. Cluster existence verification
